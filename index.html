<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Placement Prep | Ace Your Placement</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/recharts@2.5.0/dist/Recharts.js"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: {
                            DEFAULT: 'hsl(245, 58%, 51%)',
                            light: 'hsl(245, 58%, 65%)',
                            dark: 'hsl(245, 58%, 40%)',
                        }
                    }
                }
            }
        }
    </script>
    <style>
        @keyframes spin {
            to {
                transform: rotate(360deg);
            }
        }

        .spinner {
            width: 40px;
            height: 40px;
            border: 3px solid #e0e7ff;
            border-top-color: #6366f1;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 16px;
        }
    </style>
</head>

<body class="bg-slate-50 text-slate-900">
    <div id="app"></div>

    <script>
        // Simple router state
        let currentRoute = window.location.hash.slice(1) || '/';
        let currentAnalysis = null;

        // Analysis Engine
        const skillCategories = {
            'Core CS': ['DSA', 'OOP', 'DBMS', 'OS', 'Networks', 'Operating System', 'Data Structures', 'Algorithms'],
            'Languages': ['Java', 'Python', 'JavaScript', 'TypeScript', 'C++', 'C#', 'Go', 'Rust', 'Kotlin'],
            'Web': ['React', 'Next.js', 'Node.js', 'Express', 'REST', 'GraphQL', 'Angular', 'Vue', 'HTML', 'CSS'],
            'Data': ['SQL', 'MongoDB', 'PostgreSQL', 'MySQL', 'Redis', 'NoSQL', 'Database'],
            'Cloud/DevOps': ['AWS', 'Azure', 'GCP', 'Docker', 'Kubernetes', 'CI/CD', 'Linux', 'Jenkins', 'Git'],
            'Testing': ['Selenium', 'Cypress', 'Playwright', 'JUnit', 'PyTest', 'Jest', 'Testing']
        };

        function extractSkills(jdText) {
            const text = jdText.toLowerCase();
            const extracted = {};

            Object.keys(skillCategories).forEach(category => {
                const found = skillCategories[category].filter(skill =>
                    text.includes(skill.toLowerCase())
                );
                if (found.length > 0) {
                    extracted[category] = [...new Set(found)];
                }
            });

            // If no skills detected, return default general skills
            if (Object.keys(extracted).length === 0) {
                extracted['Other'] = ['Communication', 'Problem solving', 'Basic coding', 'Projects'];
            }

            return extracted;
        }

        function calculateReadiness(skills, company, role, jdLength) {
            let score = 35;
            score += Object.keys(skills).length * 5;
            if (company && company.trim()) score += 10;
            if (role && role.trim()) score += 10;
            if (jdLength > 800) score += 10;
            return Math.min(score, 100);
        }

        function generateChecklist(skills) {
            const hasSkill = (cat) => skills[cat] && skills[cat].length > 0;

            return {
                'Round 1: Aptitude & Basics': [
                    'Practice quantitative aptitude (numbers, percentages)',
                    'Solve logical reasoning puzzles',
                    'Review verbal ability and comprehension',
                    'Practice time management for MCQ tests',
                    'Revise basic mathematics and statistics'
                ],
                'Round 2: DSA & Core CS': [
                    hasSkill('Core CS') ? 'Revise DSA: arrays, strings, linked lists, trees' : 'Study basic data structures',
                    hasSkill('Core CS') ? 'Practice sorting and searching algorithms' : 'Learn algorithm basics',
                    'Review OOP concepts: inheritance, polymorphism, encapsulation',
                    'Study DBMS: normalization, indexing, transactions',
                    'Revise OS: processes, threads, memory management',
                    hasSkill('Core CS') ? 'Practice coding problems on LeetCode/HackerRank' : 'Start with easy coding problems'
                ],
                'Round 3: Technical Interview': [
                    hasSkill('Web') ? `Prepare ${skills['Web'].join(', ')} concepts` : 'Review your tech stack',
                    hasSkill('Languages') ? `Practice coding in ${skills['Languages'][0]}` : 'Practice your primary language',
                    'Prepare to explain your projects in detail',
                    hasSkill('Data') ? 'Review database design and query optimization' : 'Study basic SQL queries',
                    hasSkill('Cloud/DevOps') ? `Revise ${skills['Cloud/DevOps'].join(', ')}` : 'Learn basic Git commands',
                    'Prepare system design basics (if asked)'
                ],
                'Round 4: Managerial & HR': [
                    'Prepare "Tell me about yourself" answer',
                    'List your strengths and weaknesses with examples',
                    'Prepare STAR method answers for behavioral questions',
                    'Research the company culture and values',
                    'Prepare questions to ask the interviewer',
                    'Practice explaining why you want this role'
                ]
            };
        }

        function generate7DayPlan(skills) {
            const hasSkill = (cat) => skills[cat] && skills[cat].length > 0;

            return {
                'Day 1-2: Basics & Core CS': [
                    'Revise OOP, DBMS, OS fundamentals',
                    hasSkill('Core CS') ? 'Practice 5-10 easy DSA problems' : 'Learn basic data structures',
                    'Review your resume and projects',
                    'Prepare project explanations'
                ],
                'Day 3-4: DSA & Coding': [
                    'Solve 10-15 medium DSA problems',
                    hasSkill('Languages') ? `Practice ${skills['Languages'][0]} syntax` : 'Practice your primary language',
                    'Focus on arrays, strings, and hashmaps',
                    'Time yourself while solving'
                ],
                'Day 5: Projects & Stack': [
                    hasSkill('Web') ? `Revise ${skills['Web'].slice(0, 2).join(', ')} concepts` : 'Review your tech stack',
                    'Prepare detailed project walkthroughs',
                    hasSkill('Data') ? 'Practice SQL queries and database design' : 'Learn basic SQL',
                    'Update your resume with quantifiable achievements'
                ],
                'Day 6: Mock Interviews': [
                    'Practice behavioral questions with STAR method',
                    'Do a mock technical interview with a friend',
                    'Record yourself answering common questions',
                    'Review and improve your communication'
                ],
                'Day 7: Revision & Weak Areas': [
                    'Revisit topics you struggled with',
                    'Solve 5 problems from weak areas',
                    'Review company-specific information',
                    'Prepare questions for the interviewer',
                    'Get a good night\'s sleep'
                ]
            };
        }

        function generateQuestions(skills) {
            const questions = [];
            const hasSkill = (cat) => skills[cat] && skills[cat].length > 0;

            if (hasSkill('Core CS')) {
                questions.push(
                    'Explain the difference between stack and heap memory.',
                    'How would you optimize search in sorted data?',
                    'What is the time complexity of common sorting algorithms?'
                );
            }

            if (hasSkill('Languages')) {
                const lang = skills['Languages'][0];
                questions.push(
                    `Explain key features of ${lang}.`,
                    `What are the differences between ${lang} and other languages you know?`
                );
            }

            if (hasSkill('Web')) {
                if (skills['Web'].some(s => s.toLowerCase().includes('react'))) {
                    questions.push(
                        'Explain state management options in React.',
                        'What are React hooks and when would you use them?'
                    );
                }
                questions.push('Explain the difference between REST and GraphQL.');
            }

            if (hasSkill('Data')) {
                questions.push(
                    'Explain indexing and when it helps performance.',
                    'What is database normalization and why is it important?'
                );
            }

            if (hasSkill('Cloud/DevOps')) {
                questions.push(
                    'Explain the benefits of containerization with Docker.',
                    'What is CI/CD and why is it important?'
                );
            }

            // Fill remaining with general questions
            const general = [
                'Walk me through your most challenging project.',
                'How do you handle debugging complex issues?',
                'Explain a time you optimized code performance.',
                'How do you stay updated with new technologies?',
                'Describe your development workflow.'
            ];

            while (questions.length < 10) {
                questions.push(general[questions.length % general.length]);
            }

            return questions.slice(0, 10);
        }

        function saveToHistory(analysis) {
            const history = JSON.parse(localStorage.getItem('placementHistory') || '[]');
            history.unshift(analysis);
            localStorage.setItem('placementHistory', JSON.stringify(history.slice(0, 20)));
        }

        function getHistory() {
            try {
                const history = JSON.parse(localStorage.getItem('placementHistory') || '[]');
                // Filter out any corrupted entries
                return history.filter(entry => {
                    return entry && entry.id && entry.jdText && entry.extractedSkills;
                });
            } catch (error) {
                console.error('localStorage corrupted:', error);
                // Clear corrupted data
                localStorage.removeItem('placementHistory');
                return [];
            }
        }

        function analyzeJD(company, role, jdText) {
            const skills = extractSkills(jdText);
            const readinessScore = calculateReadiness(skills, company, role, jdText.length);
            const checklist = generateChecklist(skills);
            const plan = generate7DayPlan(skills);
            const questions = generateQuestions(skills);

            // Initialize skill confidence map (all default to "practice")
            const skillConfidenceMap = {};
            Object.values(skills).flat().forEach(skill => {
                skillConfidenceMap[skill] = 'practice';
            });

            // Generate company intel
            const companyIntel = generateCompanyIntel(company, jdText);

            // Generate round mapping
            const roundMapping = generateRoundMapping(companyIntel.size, skills);

            const analysis = {
                id: Date.now().toString(),
                createdAt: new Date().toISOString(),
                updatedAt: new Date().toISOString(),
                company: company || '',
                role: role || '',
                jdText,
                extractedSkills: skills,
                roundMapping,
                checklist,
                plan7Days: plan,
                questions,
                baseScore: readinessScore,
                skillConfidenceMap,
                finalScore: readinessScore,
                companyIntel
            };

            saveToHistory(analysis);
            currentAnalysis = analysis;

            return analysis;
        }

        // Company Intel Generation
        function generateCompanyIntel(companyName, jdText) {
            const text = jdText.toLowerCase();

            // Known enterprise companies
            const enterpriseCompanies = [
                'google', 'microsoft', 'amazon', 'meta', 'facebook', 'apple', 'netflix',
                'infosys', 'tcs', 'wipro', 'cognizant', 'accenture', 'deloitte', 'ibm',
                'oracle', 'salesforce', 'adobe', 'intel', 'nvidia', 'cisco', 'sap',
                'jpmorgan', 'goldman sachs', 'morgan stanley', 'wells fargo'
            ];

            // Determine company size
            let size = 'Startup';
            const companyLower = companyName.toLowerCase();

            if (enterpriseCompanies.some(e => companyLower.includes(e))) {
                size = 'Enterprise';
            } else if (text.includes('multinational') || text.includes('fortune') || text.includes('global')) {
                size = 'Enterprise';
            } else if (text.includes('mid-size') || text.includes('established')) {
                size = 'Mid-size';
            }

            // Infer industry
            let industry = 'Technology Services';
            if (text.includes('fintech') || text.includes('banking') || text.includes('financial')) {
                industry = 'Financial Technology';
            } else if (text.includes('ecommerce') || text.includes('e-commerce') || text.includes('retail')) {
                industry = 'E-commerce & Retail';
            } else if (text.includes('healthcare') || text.includes('medical')) {
                industry = 'Healthcare Technology';
            } else if (text.includes('edtech') || text.includes('education')) {
                industry = 'Education Technology';
            } else if (text.includes('saas') || text.includes('cloud')) {
                industry = 'Cloud & SaaS';
            } else if (text.includes('consulting')) {
                industry = 'IT Consulting';
            }

            // Hiring focus based on size
            let hiringFocus = [];
            if (size === 'Enterprise') {
                hiringFocus = [
                    'Strong DSA fundamentals and problem-solving',
                    'Core CS concepts (OS, DBMS, Networks)',
                    'System design and scalability thinking',
                    'Clean code and best practices'
                ];
            } else if (size === 'Mid-size') {
                hiringFocus = [
                    'Balanced DSA and practical coding',
                    'Hands-on experience with tech stack',
                    'Project ownership and delivery',
                    'Team collaboration skills'
                ];
            } else {
                hiringFocus = [
                    'Practical problem-solving ability',
                    'Deep knowledge of relevant stack',
                    'Ability to ship features quickly',
                    'Adaptability and learning mindset'
                ];
            }

            return {
                size,
                industry,
                hiringFocus
            };
        }

        // Round Mapping Generation
        function generateRoundMapping(companySize, skills) {
            const hasSkill = (cat) => skills[cat] && skills[cat].length > 0;
            const hasDSA = hasSkill('Core CS');
            const hasWeb = hasSkill('Web');

            let rounds = [];

            if (companySize === 'Enterprise') {
                rounds = [
                    {
                        name: 'Round 1: Online Assessment',
                        description: 'DSA coding + Aptitude + MCQs',
                        why: 'Tests fundamental problem-solving and CS knowledge at scale'
                    },
                    {
                        name: 'Round 2: Technical Interview I',
                        description: 'DSA deep-dive + Core CS concepts',
                        why: 'Evaluates coding proficiency and theoretical understanding'
                    },
                    {
                        name: 'Round 3: Technical Interview II',
                        description: 'System design + Projects discussion',
                        why: 'Assesses scalability thinking and practical experience'
                    },
                    {
                        name: 'Round 4: HR & Behavioral',
                        description: 'Culture fit + Situational questions',
                        why: 'Ensures alignment with company values and team dynamics'
                    }
                ];
            } else if (companySize === 'Mid-size') {
                rounds = [
                    {
                        name: 'Round 1: Screening',
                        description: hasDSA ? 'Coding test + Technical MCQs' : 'Technical assessment',
                        why: 'Filters candidates based on baseline technical skills'
                    },
                    {
                        name: 'Round 2: Technical Round',
                        description: hasWeb ? 'Stack-specific coding + DSA' : 'DSA + Core CS',
                        why: 'Validates hands-on coding ability and problem-solving'
                    },
                    {
                        name: 'Round 3: Project Discussion',
                        description: 'Deep-dive into past projects',
                        why: 'Understands real-world experience and ownership'
                    },
                    {
                        name: 'Round 4: Final Round',
                        description: 'Manager interview + Culture fit',
                        why: 'Confirms team compatibility and role expectations'
                    }
                ];
            } else {
                // Startup
                rounds = [
                    {
                        name: 'Round 1: Practical Coding',
                        description: hasWeb ? 'Build a feature or solve real problem' : 'Coding challenge',
                        why: 'Tests ability to ship working code quickly'
                    },
                    {
                        name: 'Round 2: Technical Discussion',
                        description: 'Stack deep-dive + Architecture chat',
                        why: 'Evaluates depth of knowledge in relevant technologies'
                    },
                    {
                        name: 'Round 3: Culture Fit',
                        description: 'Founder/Team chat + Values alignment',
                        why: 'Ensures you thrive in fast-paced startup environment'
                    }
                ];
            }

            return rounds;
        }

        // Interactive features
        function toggleSkillConfidence(skill) {
            if (!currentAnalysis) return;

            const current = currentAnalysis.skillConfidenceMap[skill];
            currentAnalysis.skillConfidenceMap[skill] = current === 'know' ? 'practice' : 'know';

            // Recalculate readiness score
            updateReadinessScore();

            // Update timestamp
            currentAnalysis.updatedAt = new Date().toISOString();

            // Save to localStorage
            updateHistoryEntry(currentAnalysis);

            // Re-render
            render();
        }

        function updateReadinessScore() {
            if (!currentAnalysis) return;

            let score = currentAnalysis.baseScore;

            Object.entries(currentAnalysis.skillConfidenceMap).forEach(([skill, confidence]) => {
                if (confidence === 'know') {
                    score += 2;
                } else {
                    score -= 2;
                }
            });

            currentAnalysis.finalScore = Math.max(0, Math.min(100, score));
        }

        function updateHistoryEntry(analysis) {
            const history = getHistory();
            const index = history.findIndex(item => item.id === analysis.id);
            if (index !== -1) {
                history[index] = analysis;
                localStorage.setItem('placementHistory', JSON.stringify(history));
            }
        }

        function copyToClipboard(text) {
            navigator.clipboard.writeText(text).then(() => {
                alert('Copied to clipboard!');
            });
        }

        function export7DayPlan() {
            if (!currentAnalysis) return;
            let text = '7-DAY PREPARATION PLAN\n\n';
            const plan = currentAnalysis.plan7Days || currentAnalysis.plan || {};
            Object.entries(plan).forEach(([day, tasks]) => {
                text += `${day}\n`;
                tasks.forEach(task => text += `  • ${task}\n`);
                text += '\n';
            });
            copyToClipboard(text);
        }

        function exportChecklist() {
            if (!currentAnalysis) return;
            let text = 'ROUND-WISE PREPARATION CHECKLIST\n\n';
            Object.entries(currentAnalysis.checklist).forEach(([round, items]) => {
                text += `${round}\n`;
                items.forEach(item => text += `  • ${item}\n`);
                text += '\n';
            });
            copyToClipboard(text);
        }

        function exportQuestions() {
            if (!currentAnalysis) return;
            let text = '10 LIKELY INTERVIEW QUESTIONS\n\n';
            currentAnalysis.questions.forEach((q, i) => {
                text += `${i + 1}. ${q}\n`;
            });
            copyToClipboard(text);
        }

        function downloadTXT() {
            if (!currentAnalysis) return;

            let content = `PLACEMENT READINESS ANALYSIS\n`;
            content += `Company: ${currentAnalysis.company || 'N/A'}\n`;
            content += `Role: ${currentAnalysis.role || 'N/A'}\n`;
            content += `Readiness Score: ${currentAnalysis.finalScore || currentAnalysis.readinessScore || 0}/100\n`;
            content += `Date: ${new Date(currentAnalysis.createdAt).toLocaleDateString()}\n\n`;
            content += `${'='.repeat(60)}\n\n`;

            content += `EXTRACTED SKILLS\n\n`;
            Object.entries(currentAnalysis.extractedSkills).forEach(([category, skills]) => {
                content += `${category}: ${skills.join(', ')}\n`;
            });
            content += `\n${'='.repeat(60)}\n\n`;

            content += `7-DAY PREPARATION PLAN\n\n`;
            const plan = currentAnalysis.plan7Days || currentAnalysis.plan || {};
            Object.entries(plan).forEach(([day, tasks]) => {
                content += `${day}\n`;
                tasks.forEach(task => content += `  • ${task}\n`);
                content += '\n';
            });
            content += `${'='.repeat(60)}\n\n`;

            content += `ROUND-WISE CHECKLIST\n\n`;
            Object.entries(currentAnalysis.checklist).forEach(([round, items]) => {
                content += `${round}\n`;
                items.forEach(item => content += `  • ${item}\n`);
                content += '\n';
            });
            content += `${'='.repeat(60)}\n\n`;

            content += `10 LIKELY INTERVIEW QUESTIONS\n\n`;
            currentAnalysis.questions.forEach((q, i) => {
                content += `${i + 1}. ${q}\n`;
            });

            const blob = new Blob([content], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `${currentAnalysis.company}_${currentAnalysis.role}_Analysis.txt`;
            a.click();
            URL.revokeObjectURL(url);
        }

        // Icon component (simple SVG)
        function Icon(name, size = 20) {
            const icons = {
                'layout': `<svg width="${size}" height="${size}" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="3" width="18" height="18" rx="2"/><line x1="3" y1="9" x2="21" y2="9"/><line x1="9" y1="21" x2="9" y2="9"/></svg>`,
                'code': `<svg width="${size}" height="${size}" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="16 18 22 12 16 6"/><polyline points="8 6 2 12 8 18"/></svg>`,
                'video': `<svg width="${size}" height="${size}" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polygon points="23 7 16 12 23 17 23 7"/><rect x="1" y="5" width="15" height="14" rx="2" ry="2"/></svg>`,
                'bar-chart-3': `<svg width="${size}" height="${size}" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="12" y1="20" x2="12" y2="10"/><line x1="18" y1="20" x2="18" y2="4"/><line x1="6" y1="20" x2="6" y2="16"/></svg>`,
                'layout-dashboard': `<svg width="${size}" height="${size}" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="3" width="7" height="9"/><rect x="14" y="3" width="7" height="5"/><rect x="14" y="12" width="7" height="9"/><rect x="3" y="16" width="7" height="5"/></svg>`,
                'code-2': `<svg width="${size}" height="${size}" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="16 18 22 12 16 6"/><polyline points="8 6 2 12 8 18"/></svg>`,
                'clipboard-check': `<svg width="${size}" height="${size}" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="8" y="2" width="8" height="4" rx="1" ry="1"/><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"/><polyline points="9 14 11 16 15 12"/></svg>`,
                'library': `<svg width="${size}" height="${size}" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"/><path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"/></svg>`,
                'user': `<svg width="${size}" height="${size}" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></svg>`,
                'log-out': `<svg width="${size}" height="${size}" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"/><polyline points="16 17 21 12 16 7"/><line x1="21" y1="12" x2="9" y2="12"/></svg>`,
                'bell': `<svg width="${size}" height="${size}" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"/><path d="M13.73 21a2 2 0 0 1-3.46 0"/></svg>`,
                'construction': `<svg width="${size}" height="${size}" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="2" y="6" width="20" height="8" rx="1"/><path d="M17 14v7"/><path d="M7 14v7"/><path d="M17 3v3"/><path d="M7 3v3"/><path d="M10 14 2.3 6.3"/><path d="m14 6 7.7 7.7"/><path d="m8 6 8 8"/></svg>`,
                'search': `<svg width="${size}" height="${size}" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="11" cy="11" r="8"/><path d="m21 21-4.35-4.35"/></svg>`,
                'clock': `<svg width="${size}" height="${size}" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>`
            };
            return icons[name] || '';
        }

        // Landing Page
        function renderLanding() {
            return `
                <div class="min-h-screen flex flex-col bg-white text-slate-900">
                    <nav class="flex items-center justify-between px-8 py-4 border-b border-slate-100">
                        <div class="flex items-center gap-2">
                            ${Icon('layout')}
                            <span class="text-xl font-bold">Placement Prep</span>
                        </div>
                        <div class="flex items-center gap-6 text-sm font-medium">
                            <a href="#" class="text-slate-600 hover:text-primary transition-colors">Features</a>
                            <a href="#" class="text-slate-600 hover:text-primary transition-colors">About</a>
                            <button onclick="navigate('/dashboard')" class="bg-primary text-white px-6 py-2 rounded-full hover:bg-primary-dark transition-all shadow-md">
                                Login
                            </button>
                        </div>
                    </nav>

                    <header class="flex-1 flex flex-col items-center justify-center text-center px-4 py-20 bg-gradient-to-b from-indigo-50/50 to-white">
                        <div class="inline-block px-4 py-1.5 mb-6 text-sm font-bold tracking-wide text-primary uppercase bg-indigo-100/50 rounded-full">
                            Your Career Starts Here
                        </div>
                        <h1 class="text-5xl md:text-7xl font-extrabold mb-6 tracking-tight">
                            Ace Your <span class="text-primary">Placement</span>
                        </h1>
                        <p class="text-xl text-slate-600 max-w-2xl mb-10 leading-relaxed">
                            Practice, assess, and prepare for your dream job with our comprehensive placement readiness platform.
                        </p>
                        <button onclick="navigate('/dashboard')" class="bg-primary text-white px-10 py-4 rounded-full text-lg font-bold hover:bg-primary-dark transition-all hover:scale-105 shadow-xl shadow-primary/30 active:scale-95">
                            Get Started
                        </button>
                    </header>

                    <section class="py-24 px-8 bg-slate-50/50">
                        <div class="max-w-6xl mx-auto grid md:grid-cols-3 gap-8">
                            <div class="bg-white p-8 rounded-2xl border border-slate-100 shadow-sm hover:shadow-md transition-all">
                                <div class="w-12 h-12 bg-indigo-100 text-primary rounded-xl flex items-center justify-center mb-6">
                                    ${Icon('code', 24)}
                                </div>
                                <h3 class="text-xl font-bold mb-2">Practice Problems</h3>
                                <p class="text-slate-500">Master coding challenges and system design concepts with real-time feedback.</p>
                            </div>
                            <div class="bg-white p-8 rounded-2xl border border-slate-100 shadow-sm hover:shadow-md transition-all">
                                <div class="w-12 h-12 bg-purple-100 text-purple-600 rounded-xl flex items-center justify-center mb-6">
                                    ${Icon('video', 24)}
                                </div>
                                <h3 class="text-xl font-bold mb-2">Mock Interviews</h3>
                                <p class="text-slate-500">Prepare for behavioral and technical rounds with interactive simulation sessions.</p>
                            </div>
                            <div class="bg-white p-8 rounded-2xl border border-slate-100 shadow-sm hover:shadow-md transition-all">
                                <div class="w-12 h-12 bg-blue-100 text-blue-600 rounded-xl flex items-center justify-center mb-6">
                                    ${Icon('bar-chart-3', 24)}
                                </div>
                                <h3 class="text-xl font-bold mb-2">Track Progress</h3>
                                <p class="text-slate-500">Analyze your performance metrics and readiness levels with advanced data insights.</p>
                            </div>
                        </div>
                    </section>

                    <footer class="py-12 border-t border-slate-100 text-center text-slate-400 text-xs font-medium">
                        <p>© 2026 Placement Prep. All rights reserved.</p>
                    </footer>
                </div>
            `;
        }

        // Dashboard Layout
        function renderDashboard() {
            const routes = {
                '/dashboard': { title: 'Dashboard', desc: 'Your personalized placement preparation dashboard.' },
                '/dashboard/practice': { title: 'Practice', desc: 'Solve coding problems and improve your skills.' },
                '/dashboard/assessments': { title: 'Assessments', desc: 'Take mock tests and evaluate your readiness.' },
                '/dashboard/resources': { title: 'Resources', desc: 'Access study materials and preparation guides.' },
                '/dashboard/profile': { title: 'Profile', desc: 'Manage your account and track your progress.' }
            };

            const current = routes[currentRoute] || routes['/dashboard'];

            return `
                <div class="flex h-screen bg-slate-50 overflow-hidden text-slate-900">
                    <aside class="w-64 bg-white border-r border-slate-200 flex flex-col shrink-0">
                        <div class="p-6 border-b border-slate-200">
                            <h2 class="text-xl font-bold text-primary flex items-center gap-2">
                                ${Icon('layout')}
                                Placement Prep
                            </h2>
                        </div>
                        <nav class="flex-1 p-4 space-y-2 overflow-y-auto">
                            ${navLink('/dashboard', 'layout-dashboard', 'Dashboard')}
                            ${navLink('/dashboard/analyze', 'search', 'Analyze JD')}
                            ${navLink('/dashboard/practice', 'code-2', 'Practice')}
                            ${navLink('/dashboard/assessments', 'clipboard-check', 'Assessments')}
                            ${navLink('/dashboard/history', 'clock', 'History')}
                            ${navLink('/dashboard/profile', 'user', 'Profile')}
                        </nav>
                        <div class="p-4 border-t border-slate-200">
                            <a href="#/" class="flex items-center gap-3 px-3 py-2 text-slate-600 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors">
                                ${Icon('log-out')}
                                <span class="font-medium">Sign Out</span>
                            </a>
                        </div>
                    </aside>

                    <div class="flex-1 flex flex-col h-full overflow-hidden">
                        <header class="h-16 bg-white border-b border-slate-200 flex items-center justify-between px-8 shrink-0">
                            <h1 class="text-lg font-semibold text-slate-700">Placement Prep</h1>
                            <div class="flex items-center gap-4">
                                <button class="p-2 text-slate-500 hover:bg-slate-100 rounded-full transition-colors relative">
                                    ${Icon('bell')}
                                    <span class="absolute top-2 right-2 w-2 h-2 bg-red-500 rounded-full border-2 border-white"></span>
                                </button>
                                <div class="flex items-center gap-3 pl-4 border-l border-slate-200">
                                    <div class="text-right">
                                        <p class="text-sm font-medium">Student</p>
                                        <p class="text-xs text-slate-500">Candidate</p>
                                    </div>
                                    <div class="w-10 h-10 rounded-full bg-primary/10 border-2 border-primary/20 flex items-center justify-center">
                                        ${Icon('user')}
                                    </div>
                                </div>
                            </div>
                        </header>

                        <main class="flex-1 overflow-y-auto p-8">
                            ${renderDashboardContent()}
                        </main>
                    </div>
                </div>
            `;
        }

        // Dashboard Content
        function renderDashboardContent() {
            if (currentRoute === '/dashboard') {
                return `
                    <div class="max-w-7xl mx-auto">
                        <h2 class="text-3xl font-bold text-slate-900 mb-8">Dashboard</h2>
                        
                        <!-- Grid Layout -->
                        <div class="grid md:grid-cols-2 gap-6">
                            
                            <!-- Overall Readiness -->
                            <div class="bg-white rounded-xl border border-slate-200 shadow-sm p-6">
                                <h3 class="text-lg font-bold text-slate-900 mb-6">Overall Readiness</h3>
                                <div class="flex flex-col items-center justify-center py-8">
                                    <div class="relative w-48 h-48">
                                        <svg class="w-full h-full transform -rotate-90">
                                            <circle cx="96" cy="96" r="88" stroke="#e0e7ff" stroke-width="12" fill="none"/>
                                            <circle cx="96" cy="96" r="88" stroke="hsl(245, 58%, 51%)" stroke-width="12" fill="none"
                                                stroke-dasharray="553" stroke-dashoffset="154" stroke-linecap="round"
                                                class="transition-all duration-1000"/>
                                        </svg>
                                        <div class="absolute inset-0 flex flex-col items-center justify-center">
                                            <span class="text-5xl font-bold text-primary">72</span>
                                            <span class="text-slate-400 text-sm">/100</span>
                                        </div>
                                    </div>
                                    <p class="mt-4 text-slate-600 font-medium">Readiness Score</p>
                                </div>
                            </div>
                            
                            <!-- Skill Breakdown -->
                            <div class="bg-white rounded-xl border border-slate-200 shadow-sm p-6">
                                <h3 class="text-lg font-bold text-slate-900 mb-6">Skill Breakdown</h3>
                                <div id="radar-chart" class="flex items-center justify-center h-64"></div>
                            </div>
                            
                            <!-- Continue Practice -->
                            <div class="bg-white rounded-xl border border-slate-200 shadow-sm p-6">
                                <h3 class="text-lg font-bold text-slate-900 mb-4">Continue Practice</h3>
                                <div class="flex items-start gap-4 mb-4">
                                    <div class="w-12 h-12 bg-indigo-100 rounded-lg flex items-center justify-center shrink-0">
                                        ${Icon('code-2', 24)}
                                    </div>
                                    <div class="flex-1">
                                        <h4 class="font-bold text-slate-900 mb-1">Dynamic Programming</h4>
                                        <p class="text-sm text-slate-500 mb-3">3 of 10 problems completed</p>
                                        <div class="w-full bg-slate-100 rounded-full h-2 mb-4">
                                            <div class="bg-primary h-2 rounded-full transition-all" style="width: 30%"></div>
                                        </div>
                                        <button onclick="navigate('/dashboard/practice')" class="bg-primary text-white px-4 py-2 rounded-lg text-sm font-medium hover:bg-primary-dark transition-colors">
                                            Continue
                                        </button>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Weekly Goals -->
                            <div class="bg-white rounded-xl border border-slate-200 shadow-sm p-6">
                                <h3 class="text-lg font-bold text-slate-900 mb-4">Weekly Goals</h3>
                                <div class="mb-6">
                                    <div class="flex justify-between items-center mb-2">
                                        <span class="text-sm font-medium text-slate-700">Problems Solved</span>
                                        <span class="text-sm font-bold text-primary">12/20</span>
                                    </div>
                                    <div class="w-full bg-slate-100 rounded-full h-2">
                                        <div class="bg-primary h-2 rounded-full transition-all" style="width: 60%"></div>
                                    </div>
                                </div>
                                <div class="flex justify-between gap-2">
                                    ${['M', 'T', 'W', 'T', 'F', 'S', 'S'].map((day, i) => `
                                        <div class="flex flex-col items-center gap-1">
                                            <div class="w-10 h-10 rounded-full flex items-center justify-center text-xs font-medium ${i < 4 ? 'bg-primary text-white' : 'bg-slate-100 text-slate-400'}">
                                                ${day}
                                            </div>
                                        </div>
                                    `).join('')}
                                </div>
                            </div>
                            
                            <!-- Upcoming Assessments -->
                            <div class="bg-white rounded-xl border border-slate-200 shadow-sm p-6 md:col-span-2">
                                <h3 class="text-lg font-bold text-slate-900 mb-4">Upcoming Assessments</h3>
                                <div class="space-y-3">
                                    ${[
                        { title: 'DSA Mock Test', time: 'Tomorrow, 10:00 AM', icon: 'clipboard-check', color: 'bg-blue-100 text-blue-600' },
                        { title: 'System Design Review', time: 'Wed, 2:00 PM', icon: 'layout', color: 'bg-purple-100 text-purple-600' },
                        { title: 'HR Interview Prep', time: 'Friday, 11:00 AM', icon: 'user', color: 'bg-green-100 text-green-600' }
                    ].map(assessment => `
                                        <div class="flex items-center gap-4 p-4 border border-slate-200 rounded-lg hover:border-primary transition-colors">
                                            <div class="w-10 h-10 ${assessment.color} rounded-lg flex items-center justify-center shrink-0">
                                                ${Icon(assessment.icon, 20)}
                                            </div>
                                            <div class="flex-1">
                                                <h4 class="font-bold text-slate-900">${assessment.title}</h4>
                                                <p class="text-sm text-slate-500">${assessment.time}</p>
                                            </div>
                                            <button class="text-primary hover:text-primary-dark font-medium text-sm">
                                                View Details
                                            </button>
                                        </div>
                                    `).join('')}
                                </div>
                            </div>
                            
                        </div>
                    </div>
                `;
            } else if (currentRoute === '/dashboard/analyze') {
                return `
                    <div class="max-w-4xl mx-auto">
                        <h2 class="text-3xl font-bold text-slate-900 mb-2">Analyze Job Description</h2>
                        <p class="text-slate-500 mb-8">Get personalized preparation insights based on the JD</p>
                        
                        <div class="bg-white rounded-xl border border-slate-200 shadow-sm p-8">
                            <form id="analyze-form" onsubmit="handleAnalyze(event)">
                                <div class="space-y-6">
                                    <div>
                                        <label class="block text-sm font-medium text-slate-700 mb-2">Company Name</label>
                                        <input type="text" id="company-input" class="w-full px-4 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary" placeholder="e.g., Google, Microsoft">
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-slate-700 mb-2">Role</label>
                                        <input type="text" id="role-input" class="w-full px-4 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary" placeholder="e.g., Software Engineer, Data Analyst">
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-slate-700 mb-2">Job Description *</label>
                                        <textarea id="jd-input" required rows="10" class="w-full px-4 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary" placeholder="Paste the complete job description here..."></textarea>
                                    </div>
                                    <button type="submit" class="w-full bg-primary text-white px-6 py-3 rounded-lg font-medium hover:bg-primary-dark transition-colors">
                                        Analyze & Generate Plan
                                    </button>
                                </div>
                            </form>
                        </div>
                    </div>
                `;
            } else if (currentRoute === '/dashboard/history') {
                const history = getHistory();
                return `
                    <div class="max-w-6xl mx-auto">
                        <h2 class="text-3xl font-bold text-slate-900 mb-8">Analysis History</h2>
                        ${history.length === 0 ? `
                            <div class="bg-white rounded-xl border border-slate-200 shadow-sm p-12 text-center">
                                ${Icon('clock', 48)}
                                <p class="mt-4 text-slate-500">No analysis history yet. Start by analyzing a job description!</p>
                                <button onclick="navigate('/dashboard/analyze')" class="mt-6 bg-primary text-white px-6 py-2 rounded-lg font-medium hover:bg-primary-dark transition-colors">
                                    Analyze JD
                                </button>
                            </div>
                        ` : `
                            <div class="grid gap-4">
                                ${history.map(item => `
                                    <div onclick="viewAnalysis('${item.id}')" class="bg-white rounded-xl border border-slate-200 shadow-sm p-6 hover:border-primary transition-colors cursor-pointer">
                                        <div class="flex items-center justify-between">
                                            <div class="flex-1">
                                                <h3 class="text-lg font-bold text-slate-900">${item.company} - ${item.role}</h3>
                                                <p class="text-sm text-slate-500 mt-1">${new Date(item.createdAt).toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: 'numeric', hour: '2-digit', minute: '2-digit' })}</p>
                                            </div>
                                            <div class="flex items-center gap-4">
                                                <div class="text-right">
                                                    <p class="text-2xl font-bold text-primary">${item.readinessScore}</p>
                                                    <p class="text-xs text-slate-500">Readiness</p>
                                                </div>
                                                <div class="text-primary">
                                                    ${Icon('search', 24)}
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                `).join('')}
                            </div>
                        `}
                    </div>
                `;
            } else if (currentRoute.startsWith('/dashboard/results')) {
                const analysis = currentAnalysis;
                if (!analysis) {
                    return `
                        <div class="max-w-4xl mx-auto text-center">
                            <div class="bg-white rounded-xl border border-slate-200 shadow-sm p-12">
                                ${Icon('search', 48)}
                                <p class="mt-4 text-slate-500">No analysis found. Please analyze a job description first.</p>
                                <button onclick="navigate('/dashboard/analyze')" class="mt-6 bg-primary text-white px-6 py-2 rounded-lg font-medium hover:bg-primary-dark transition-colors">
                                    Analyze JD
                                </button>
                            </div>
                        </div>
                    `;
                }

                return `
                    <div class="max-w-6xl mx-auto">
                        <div class="flex items-center justify-between mb-8">
                            <div>
                                <h2 class="text-3xl font-bold text-slate-900">${analysis.company}</h2>
                                <p class="text-slate-500">${analysis.role}</p>
                            </div>
                            <div class="text-center">
                                <p class="text-5xl font-bold text-primary">${analysis.finalScore || analysis.readinessScore || 0}</p>
                                <p class="text-sm text-slate-500">Readiness Score</p>
                            </div>
                        </div>
                        
                        <div class="grid gap-6">
                            <!-- Export Buttons -->
                            <div class="flex flex-wrap gap-3">
                                <button onclick="export7DayPlan()" class="px-4 py-2 bg-white border border-slate-300 text-slate-700 rounded-lg hover:bg-slate-50 transition-colors text-sm font-medium">
                                    Copy 7-Day Plan
                                </button>
                                <button onclick="exportChecklist()" class="px-4 py-2 bg-white border border-slate-300 text-slate-700 rounded-lg hover:bg-slate-50 transition-colors text-sm font-medium">
                                    Copy Round Checklist
                                </button>
                                <button onclick="exportQuestions()" class="px-4 py-2 bg-white border border-slate-300 text-slate-700 rounded-lg hover:bg-slate-50 transition-colors text-sm font-medium">
                                    Copy 10 Questions
                                </button>
                                <button onclick="downloadTXT()" class="px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary-dark transition-colors text-sm font-medium">
                                    Download as TXT
                                </button>
                            </div>
                            
                            <!-- Extracted Skills with Toggles -->
                            <div class="bg-white rounded-xl border border-slate-200 shadow-sm p-6">
                                <h3 class="text-lg font-bold text-slate-900 mb-2">Extracted Skills</h3>
                                <p class="text-sm text-slate-500 mb-4">Toggle your confidence level to update your readiness score</p>
                                <div class="space-y-3">
                                    ${Object.entries(analysis.extractedSkills).map(([category, skills]) => `
                                        <div>
                                            <p class="text-sm font-medium text-slate-700 mb-2">${category}</p>
                                            <div class="flex flex-wrap gap-2">
                                                ${skills.map(skill => {
                    const confidence = analysis.skillConfidenceMap[skill] || 'practice';
                    const isKnow = confidence === 'know';
                    return `
                                                        <button onclick="toggleSkillConfidence('${skill}')" class="group relative px-3 py-1 rounded-full text-sm font-medium transition-all ${isKnow
                            ? 'bg-green-100 text-green-700 border-2 border-green-400'
                            : 'bg-orange-100 text-orange-700 border-2 border-orange-400'
                        }">
                                                            ${skill}
                                                            <span class="ml-1 text-xs">${isKnow ? '✓' : '⚠'}</span>
                                                            <span class="absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-2 py-1 bg-slate-800 text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap">
                                                                ${isKnow ? 'I know this' : 'Need practice'}
                                                            </span>
                                                        </button>
                                                    `;
                }).join('')}
                                            </div>
                                        </div>
                                    `).join('')}
                                </div>
                            </div>
                            
                            <!-- Company Intel -->
                            ${analysis.companyIntel ? `
                                <div class="bg-white rounded-xl border border-slate-200 shadow-sm p-6">
                                    <div class="flex items-center justify-between mb-4">
                                        <h3 class="text-lg font-bold text-slate-900">Company Intel</h3>
                                        <span class="text-xs text-slate-400 italic">Demo Mode: Heuristically generated</span>
                                    </div>
                                    <div class="grid md:grid-cols-3 gap-4 mb-4">
                                        <div>
                                            <p class="text-xs text-slate-500 mb-1">Company Size</p>
                                            <p class="font-bold text-slate-900">${analysis.companyIntel.size}</p>
                                            <p class="text-xs text-slate-500 mt-1">
                                                ${analysis.companyIntel.size === 'Enterprise' ? '2000+ employees' :
                            analysis.companyIntel.size === 'Mid-size' ? '200-2000 employees' :
                                '<200 employees'}
                                            </p>
                                        </div>
                                        <div>
                                            <p class="text-xs text-slate-500 mb-1">Industry</p>
                                            <p class="font-bold text-slate-900">${analysis.companyIntel.industry}</p>
                                        </div>
                                        <div>
                                            <p class="text-xs text-slate-500 mb-1">Hiring Type</p>
                                            <p class="font-bold text-slate-900">
                                                ${analysis.companyIntel.size === 'Enterprise' ? 'Structured Process' :
                            analysis.companyIntel.size === 'Mid-size' ? 'Balanced Approach' :
                                'Fast-paced'}
                                            </p>
                                        </div>
                                    </div>
                                    <div>
                                        <p class="text-sm font-medium text-slate-700 mb-2">Typical Hiring Focus</p>
                                        <ul class="space-y-1">
                                            ${analysis.companyIntel.hiringFocus.map(focus => `
                                                <li class="text-sm text-slate-600 flex items-start gap-2">
                                                    <span class="text-primary mt-1">•</span>
                                                    <span>${focus}</span>
                                                </li>
                                            `).join('')}
                                        </ul>
                                    </div>
                                </div>
                            ` : ''}
                            
                            <!-- Round Mapping -->
                            ${analysis.roundMapping ? `
                                <div class="bg-white rounded-xl border border-slate-200 shadow-sm p-6">
                                    <h3 class="text-lg font-bold text-slate-900 mb-4">Expected Interview Rounds</h3>
                                    <div class="relative">
                                        <!-- Vertical timeline line -->
                                        <div class="absolute left-4 top-0 bottom-0 w-0.5 bg-slate-200"></div>
                                        
                                        <div class="space-y-6">
                                            ${analysis.roundMapping.map((round, index) => `
                                                <div class="relative pl-12">
                                                    <!-- Timeline dot -->
                                                    <div class="absolute left-0 w-8 h-8 bg-primary text-white rounded-full flex items-center justify-center text-sm font-bold">
                                                        ${index + 1}
                                                    </div>
                                                    <div>
                                                        <h4 class="font-bold text-slate-900 mb-1">${round.name}</h4>
                                                        <p class="text-sm text-slate-600 mb-2">${round.description}</p>
                                                        <div class="bg-indigo-50 border-l-4 border-primary pl-3 py-2">
                                                            <p class="text-xs text-slate-600"><span class="font-medium">Why this matters:</span> ${round.why}</p>
                                                        </div>
                                                    </div>
                                                </div>
                                            `).join('')}
                                        </div>
                                    </div>
                                </div>
                            ` : ''}
                            
                            <!-- Round-wise Checklist -->
                            <div class="bg-white rounded-xl border border-slate-200 shadow-sm p-6">
                                <h3 class="text-lg font-bold text-slate-900 mb-4">Round-wise Preparation Checklist</h3>
                                <div class="space-y-6">
                                    ${Object.entries(analysis.checklist).map(([round, items]) => `
                                        <div>
                                            <h4 class="font-bold text-slate-900 mb-3">${round}</h4>
                                            <ul class="space-y-2">
                                                ${items.map(item => `
                                                    <li class="flex items-start gap-2 text-sm text-slate-600">
                                                        <span class="text-primary mt-1">•</span>
                                                        <span>${item}</span>
                                                    </li>
                                                `).join('')}
                                            </ul>
                                        </div>
                                    `).join('')}
                                </div>
                            </div>
                            
                            <!-- 7-Day Plan -->
                            <div class="bg-white rounded-xl border border-slate-200 shadow-sm p-6">
                                <h3 class="text-lg font-bold text-slate-900 mb-4">7-Day Preparation Plan</h3>
                                <div class="space-y-4">
                                    ${Object.entries(analysis.plan).map(([day, tasks]) => `
                                        <div class="border-l-4 border-primary pl-4">
                                            <h4 class="font-bold text-slate-900 mb-2">${day}</h4>
                                            <ul class="space-y-1">
                                                ${tasks.map(task => `
                                                    <li class="text-sm text-slate-600">• ${task}</li>
                                                `).join('')}
                                            </ul>
                                        </div>
                                    `).join('')}
                                </div>
                            </div>
                            
                            <!-- Interview Questions -->
                            <div class="bg-white rounded-xl border border-slate-200 shadow-sm p-6">
                                <h3 class="text-lg font-bold text-slate-900 mb-4">10 Likely Interview Questions</h3>
                                <ol class="space-y-3">
                                    ${analysis.questions.map((q, i) => `
                                        <li class="flex gap-3">
                                            <span class="flex-shrink-0 w-6 h-6 bg-primary text-white rounded-full flex items-center justify-center text-xs font-bold">${i + 1}</span>
                                            <span class="text-slate-700">${q}</span>
                                        </li>
                                    `).join('')}
                                </ol>
                            </div>
                            
                            <!-- Action Next Box -->
                            <div class="bg-gradient-to-r from-indigo-50 to-purple-50 rounded-xl border border-indigo-200 shadow-sm p-6">
                                <h3 class="text-lg font-bold text-slate-900 mb-4">🎯 Action Next</h3>
                                ${(() => {
                        const weakSkills = Object.entries(analysis.skillConfidenceMap)
                            .filter(([_, conf]) => conf === 'practice')
                            .map(([skill]) => skill)
                            .slice(0, 3);

                        return `
                                        ${weakSkills.length > 0 ? `
                                            <div class="mb-4">
                                                <p class="text-sm font-medium text-slate-700 mb-2">Focus on these skills:</p>
                                                <div class="flex flex-wrap gap-2">
                                                    ${weakSkills.map(skill => `
                                                        <span class="px-3 py-1 bg-white border border-orange-300 text-orange-700 rounded-full text-sm font-medium">${skill}</span>
                                                    `).join('')}
                                                </div>
                                            </div>
                                        ` : ''}
                                        <div class="bg-white rounded-lg p-4 border border-indigo-200">
                                            <p class="text-slate-700 font-medium mb-2">💡 Suggested Next Step:</p>
                                            <p class="text-slate-600 text-sm mb-3">Start Day 1 of your preparation plan now. Focus on fundamentals and review your projects.</p>
                                            <button onclick="navigate('/dashboard/practice')" class="bg-primary text-white px-4 py-2 rounded-lg text-sm font-medium hover:bg-primary-dark transition-colors">
                                                Start Day 1 Plan
                                            </button>
                                        </div>
                                    `;
                    })()}
                            </div>
                        </div>
                    </div>
                `;
            } else {
                const routes = {
                    '/dashboard/practice': { title: 'Practice', desc: 'Solve coding problems and improve your skills.' },
                    '/dashboard/assessments': { title: 'Assessments', desc: 'Take mock tests and evaluate your readiness.' },
                    '/dashboard/profile': { title: 'Profile', desc: 'Manage your account and track your progress.' }
                };
                const current = routes[currentRoute] || { title: 'Page', desc: 'Content coming soon.' };
                return `
                    <div class="max-w-4xl">
                        <h2 class="text-2xl font-bold text-slate-900 mb-2">${current.title}</h2>
                        <p class="text-slate-500 mb-8 font-medium">${current.desc}</p>
                        <div class="bg-white rounded-xl border border-slate-200 shadow-sm h-64 flex flex-col items-center justify-center text-slate-300 gap-4">
                            ${Icon('construction', 48)}
                            <span class="italic font-medium">This module is currently under development.</span>
                        </div>
                    </div>
                `;
            }
        }

        function navLink(path, icon, label) {
            const isActive = currentRoute === path;
            return `
                <a href="#${path}" class="flex items-center gap-3 px-3 py-2 rounded-lg transition-colors ${isActive ? 'bg-primary text-white shadow-md' : 'text-slate-600 hover:bg-slate-100 hover:text-primary'
                }">
                    ${Icon(icon)}
                    <span class="font-medium">${label}</span>
                </a>
            `;
        }

        function handleAnalyze(event) {
            event.preventDefault();
            const company = document.getElementById('company-input').value;
            const role = document.getElementById('role-input').value;
            const jdText = document.getElementById('jd-input').value;

            analyzeJD(company, role, jdText);
            navigate('/dashboard/results');
        }

        function viewAnalysis(id) {
            const history = getHistory();
            const analysis = history.find(item => item.id === id);
            if (analysis) {
                currentAnalysis = analysis;
                navigate('/dashboard/results');
            }
        }

        function navigate(path) {
            window.location.hash = path;
        }

        function render() {
            currentRoute = window.location.hash.slice(1) || '/';
            const app = document.getElementById('app');

            if (currentRoute === '/' || currentRoute === '') {
                app.innerHTML = renderLanding();
            } else {
                app.innerHTML = renderDashboard();

                // Initialize radar chart if on dashboard
                if (currentRoute === '/dashboard') {
                    setTimeout(() => initRadarChart(), 100);
                }
            }
        }

        function initRadarChart() {
            const container = document.getElementById('radar-chart');
            if (!container || !window.Recharts) return;

            const data = [
                { subject: 'DSA', score: 75, fullMark: 100 },
                { subject: 'System Design', score: 60, fullMark: 100 },
                { subject: 'Communication', score: 80, fullMark: 100 },
                { subject: 'Resume', score: 85, fullMark: 100 },
                { subject: 'Aptitude', score: 70, fullMark: 100 }
            ];

            const { RadarChart, PolarGrid, PolarAngleAxis, PolarRadiusAxis, Radar, ResponsiveContainer } = window.Recharts;

            const chart = React.createElement(ResponsiveContainer, { width: '100%', height: 250 },
                React.createElement(RadarChart, { data: data },
                    React.createElement(PolarGrid, { stroke: '#e2e8f0' }),
                    React.createElement(PolarAngleAxis, { dataKey: 'subject', tick: { fill: '#64748b', fontSize: 12 } }),
                    React.createElement(PolarRadiusAxis, { angle: 90, domain: [0, 100], tick: { fill: '#94a3b8', fontSize: 10 } }),
                    React.createElement(Radar, {
                        name: 'Skills',
                        dataKey: 'score',
                        stroke: 'hsl(245, 58%, 51%)',
                        fill: 'hsl(245, 58%, 51%)',
                        fillOpacity: 0.3
                    })
                )
            );

            ReactDOM.render(chart, container);
        }

        window.addEventListener('hashchange', render);
        window.addEventListener('load', render);
    </script>
</body>